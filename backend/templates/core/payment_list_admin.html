{% extends "base.html" %}
{% load auth_extras %}

{% block content %}
<h1>Pagos (admin)</h1>

<form method="get" style="margin-bottom:1rem;">
  <label>Período:</label>
  <input
    type="text"
    name="period"
    value="{{ request.GET.period }}"
    placeholder="YYYY-MM" />
  <button>Filtrar</button>
  <a href="{% url 'core:payment_list_admin' %}">Limpiar</a>
</form>

<ul>
  {% for p in payments %}
    <li>
      {{ p.resident }} — {{ p.fee.period }} — ${{ p.amount }}
      — {{ p.get_status_display }}
      {% if p.paid_at %} ({{ p.paid_at|date:"Y-m-d H:i" }}){% endif %}
      — <a href="{% url 'core:payment_update_admin' p.pk %}">Editar</a>
    </li>
  {% empty %}
    <li>No hay pagos.</li>
  {% endfor %}
</ul>
{% endblock %}
