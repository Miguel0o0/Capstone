{% extends "base.html" %}
{% load auth_extras %}

{% block title %}Aviso: {{ aviso.titulo }}{% endblock %}

{% block content %}
<div class="announcement-detail-page">
  <div class="card announcement-detail-card">
    <header style="margin-bottom: 1.5rem;">
      <p class="text-muted" style="font-size: .9rem; margin-bottom: .25rem;">
        Aviso publicado por la directiva
      </p>
      <h1 style="font-size: 1.8rem; font-weight: 700; margin: 0 0 .75rem;">
        {{ aviso.titulo }}
      </h1>

      <p style="color:#6b7280; font-size:.9rem; margin:0;">
        Autor:
        <strong>{{ aviso.creado_por }}</strong>
        · Fecha:
        <span>{{ aviso.creado_en|date:"d/m/Y H:i" }}</span>
        {% if aviso.visible_hasta %}
          · Visible hasta:
          <span>{{ aviso.visible_hasta|date:"d/m/Y" }}</span>
        {% endif %}
      </p>
    </header>

    <hr style="border:none; border-top:1px solid #e5e7eb; margin:0 0 1.5rem;">

    <article style="font-size:1rem; line-height:1.6; color:#111827;">
      {{ aviso.cuerpo|linebreaks }}
    </article>

    <div class="announcement-detail-actions">
      <a href="{% url 'core:announcement_list' %}"
         class="btn btn-outline announcement-detail-btn">
        Volver a los avisos
      </a>

      {% if perms.core.change_announcement %}
        <a href="{% url 'core:announcement_update' aviso.pk %}"
           class="btn btn-primary announcement-detail-btn">
          Editar aviso
        </a>
      {% endif %}

      {% if perms.core.delete_announcement %}
        <form method="post"
              action="{% url 'core:announcement_delete' aviso.pk %}">
          {% csrf_token %}
          <button type="submit"
                  class="btn btn-danger announcement-detail-btn"
                  onclick="return confirm('¿Seguro que deseas eliminar este aviso?');">
            Eliminar aviso
          </button>
        </form>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
