{% extends "base.html" %}
{% load auth_extras %}

{% block content %}
<h1>Avisos</h1>

{# Solo Admin/Secretario/Superuser ve "Nuevo aviso" #}
{% if user.is_authenticated %}
  {% if user.is_superuser or user|has_group:"Admin" or user|has_group:"Secretario" %}
    <p><a class="btn btn-primary" href="{% url 'core:announcement_create' %}">Nuevo aviso</a></p>
  {% endif %}
{% endif %}

<ul class="list">
  {% for a in avisos %}
    <li>
      <a href="{% url 'core:announcement_detail' a.pk %}">{{ a.titulo }}</a>
      <small> â€” {{ a.creado_en|date:"Y-m-d H:i" }}</small>
      {% if a.visible_hasta %}
        <small>(visible hasta {{ a.visible_hasta }})</small>
      {% endif %}
    </li>
  {% empty %}
    <li>No hay avisos.</li>
  {% endfor %}
</ul>
{% endblock %}
